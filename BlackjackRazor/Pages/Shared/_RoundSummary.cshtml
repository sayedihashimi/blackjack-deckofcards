@using BlackjackRazor.Domain
@using BlackjackRazor.UI
@model RoundSummaryModel
@{
    var snap = Model.Snapshot;
    var net = Model.Net;
    string netClass = net > 0 ? "text-green-300" : net < 0 ? "text-red-300" : "text-neutral-200";
}
<div id="round-summary" data-roundsummary class="fixed top-4 left-1/2 -translate-x-1/2 z-40 w-[90%] max-w-2xl shadow-lg border border-neutral-700 rounded bg-neutral-900/95 backdrop-blur p-4 animate-fade-in transition-opacity duration-300" role="dialog" aria-modal="true" aria-labelledby="round-summary-title" aria-hidden="false">
    <div class="flex justify-between items-start mb-2">
        <h3 id="round-summary-title" class="text-sm font-semibold tracking-wide" tabindex="-1">Round Summary</h3>
        <button type="button" class="text-xs px-2 py-1 rounded bg-neutral-700 hover:bg-neutral-600" aria-label="Dismiss round summary" data-roundsummary-close>âœ•</button>
    </div>
    <div class="text-xs mb-2">
        <span class="font-semibold">Net:</span>
        <span class="font-mono @netClass">@(net >=0 ? "+" + net : net.ToString())</span>
        <span class="ml-3 font-semibold">Bankroll:</span>
        <span class="font-mono">@snap.Bankroll</span>
    </div>
    <table class="w-full text-[11px] border border-neutral-700">
        <thead class="bg-neutral-800/70">
            <tr>
                <th class="p-1 text-left">Hand</th>
                <th class="p-1 text-right">Bet</th>
                <th class="p-1 text-right">Payout</th>
                <th class="p-1 text-right">Net</th>
                <th class="p-1 text-left">Outcome</th>
            </tr>
        </thead>
        <tbody>
        @foreach (var r in Model.Results)
        {
            var rNetClass = r.NetDelta > 0 ? "text-green-400" : r.NetDelta < 0 ? "text-red-400" : "text-neutral-300";
            <tr class="border-t border-neutral-700">
                <td class="p-1">@r.HandIndex</td>
                <td class="p-1 text-right">@r.Bet</td>
                <td class="p-1 text-right">@r.Payout</td>
                <td class="p-1 text-right @rNetClass">@r.NetDelta</td>
                <td class="p-1">@r.Outcome</td>
            </tr>
        }
        </tbody>
    </table>
</div>
<style>
keyframes fade-in { from { opacity:0; transform: translate(-50%, -8px);} to { opacity:1; transform: translate(-50%, 0);} }
.animate-fade-in { animation: fade-in 0.35s ease-out; }
</style>
